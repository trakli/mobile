# ‚ö†Ô∏è TEMPORARY WORKFLOW - DELETE AFTER USE ‚ö†Ô∏è
# This workflow outputs the base64 keystore so you can retrieve it locally
# 
# Steps:
# 1. Push this file to GitHub
# 2. Go to Actions tab and run this workflow manually
# 3. Copy the base64 output from the logs
# 4. On your local machine: echo '<base64_string>' | base64 --decode > android/key.jks
# 5. DELETE THIS WORKFLOW FILE after retrieving the keystore

name: üîì Temporary - Get Keystore Base64

on:
  workflow_dispatch:  # Allows manual trigger
  push:
    branches: [temp-store]

jobs:
  output-keystore:
    name: Output Keystore Base64
    runs-on: ubuntu-latest
    steps:
      - name: Create keystore info file
        run: |
          cat > keystore-info.txt << EOF
          ANDROID_KEYSTORE_FILE_BASE64:
          ${{ secrets.ANDROID_KEYSTORE_FILE_BASE64 }}
          
          ANDROID_KEYSTORE_PASSWORD:
          ${{ secrets.ANDROID_KEYSTORE_PASSWORD }}
          
          To decode locally, run:
          echo '<base64_string>' | base64 --decode > android/key.jks
          
          Then set password:
          export ANDROID_KEYSTORE_PASSWORD='<password>'
          EOF
      
      - name: Upload keystore info as artifact
        uses: actions/upload-artifact@v4
        with:
          name: keystore-info
          path: keystore-info.txt
          retention-days: 1
      
      - name: Output instructions
        run: |
          echo "‚ö†Ô∏è  Keystore information has been saved to an artifact!"
          echo "=================================="
          echo ""
          echo "üì• Download the artifact 'keystore-info' from this workflow run"
          echo "   The file contains the base64 keystore and password"
          echo ""
          echo "‚ö†Ô∏è  DELETE THIS WORKFLOW AFTER USE!"


